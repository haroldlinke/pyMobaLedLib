// This file contains the DCC and LED definitions.
//
// It was automatically generated by the program ProgGenerator Ver. 3.3.2E      by Hardi
// File creation: 01/22/25 11:47:22
// (Attention: The display in the Arduino IDE is not updated if Options/External Editor is disabled)

#ifndef __LEDS_AUTOPROG_H__
#define __LEDS_AUTOPROG_H__

#ifndef CONFIG_ONLY
#ifndef ARDUINO_RASPBERRY_PI_PICO
#define FASTLED_INTERNAL       // Disable version number message in FastLED library (looks like an error)
#include <FastLED.h>           // The FastLED library must be installed in addition if you got the error message "..fatal error: FastLED.h: No such file or directory"
                               // Arduino IDE: Sketch / Include library / Manage libraries                    Deutsche IDE: Sketch / Bibliothek einbinden / Bibliothek verwalten
                               //              Type "FastLED" in the "Filter your search..." field                          "FastLED" in das "Grenzen Sie ihre Suche ein" Feld eingeben
                               //              Select the entry and click "Install"                                         Gefundenen Eintrag auswaehlen und "Install" anklicken
#else
#include <PicoFastLED.h>       // Juergens minimum version or FastLED for Raspberry Pico
#endif
#endif // CONFIG_ONLY

#include <MobaLedLib.h>

#define START_MSG "LEDs_AutoProg Ver 1: 01.22.25 11:47"

#define TWO_BUTTONS_PER_ADDRESS 1      // Two buttons (Red/Green) are used (DCC/LNet/CAN)
#ifdef NUM_LEDS
  #warning "'NUM_LEDS' definition in the main program is replaced by the included 'LEDs_AutoProg.h' with 20"
  #undef NUM_LEDS
#endif

#define NUM_LEDS 20                    // Number of LEDs (Maximal 256 RGB LEDs could be used)

#define LEDS_PER_CHANNEL ",19,0,1"

#define USE_PROTOCOL_DCC

#define RECEIVE_LED_COLOR_PER_RS232

#define GEN_BUTTON_RELEASE
#define GEN_BUTTON_RELEASE_COM GEN_OFF
// Input channel defines for local inputs and expert users


#ifndef CONFIG_ONLY
//*** Analog switches ***

#include <AnalogScanner.h>   // Interrupt driven analog reading library. The library has to be installed manually from https://github.com/merose/AnalogScanner
AnalogScanner scanner;       // Creates an instance of the analog pin scanner.


#include "Read_LDR.h"     // Darkness sensor

#endif //CONFIG_ONLY
#define START_SWITCHES_A  0                                        // Define the start number for the first analog switch

//*** Output Channels ***
#define START_VARIABLES   0                                        // Define the start number for the variables.
#define Haus1                   0                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:1
#define schrittschaltwerk       1                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:2
#define licht1                  2                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:3
#define licht6                  3                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:4
#define licht5                  4                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:5
#define licht8                  5                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:6
#define licht7                  6                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:7
#define licht4                  7                                        // Z21-RM-Rückmelder: Adresse:1 Eingang:8
#define licht3                  8                                        // Z21-RM-Rückmelder: Adresse:2 Eingang:1
#define licht2                  9                                        // Z21-RM-Rückmelder: Adresse:2 Eingang:2
#define lichtoben               10                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:3
#define lichtunten              11                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:4


#define START_SEND_INPUTS 0                                        // Start address of all switches/variables
#define TOTAL_SEND_INPUTS 12                                       // Number of used switches/variables
#define TOTAL_SWITCHES_A  0                                        // Number of used inputs for analog keyboard
#define TOTAL_SWITCHES_B  0                                        // Number of used inputs for keyboard 1
#define TOTAL_SWITCHES_C  0                                        // Number of used inputs for keyboard 2
#define TOTAL_SWITCHES_D  0                                        // Number of used inputs for main board switches
#define TOTAL_VARIABLES   12                                       // Number of used variables
/*********************/
#define SETUP_FASTLED()                                                      \
/*********************/                                                      \
  CLEDController& controller0 = FastLED.addLeds<NEOPIXEL,  6>(leds+  0, 19); \
                                                                             \
  controller0.clearLeds(256);                                                \
  FastLED.setDither(DISABLE_DITHER);       // avoid sending slightly modified brightness values
/*End*/

#define USE_ADDITIONAL_SETUP_PROC                                  // Activate the usage of the Additional_Setup_Proc()

//--------------------------
void Additional_Setup_Proc()
//--------------------------
{
#ifndef CONFIG_ONLY
  int scanOrder[] = {A7};
  const int SCAN_COUNT = sizeof(scanOrder) / sizeof(scanOrder[0]);

  Init_DarknessSensor(A7, 50, SCAN_COUNT); // Attention: The analogRead() function can't be used together with the darkness sensor !
  scanner.setCallback(A7, Darkness_Detection_Callback);
  scanner.setScanOrder(SCAN_COUNT, scanOrder);
  scanner.beginScanning();
#endif

}

// ----- LED to Var -----
  #define USE_LED_TO_VAR

  #define T_EQUAL_THEN     0
  #define T_NOT_EQUAL_THEN 1
  #define T_LESS_THEN      2
  #define T_GREATER_THAN   3
  #define T_BIN_MASK       4
  #define T_NOT_BIN_MASK   5

  typedef struct
      {
      uint8_t  Var_Nr;
      uint8_t  LED_Nr;
      uint8_t  Offset_and_Typ; // ---oottt    Offset: 0..2
      uint8_t  Val;
      } __attribute__ ((packed)) LED2Var_Tab_T;

#ifdef CONFIG_ONLY
  const LED2Var_Tab_T LED2Var_Tab[] __attribute__ ((section (".MLLL2VConfig"))) =
#else
  const PROGMEM LED2Var_Tab_T LED2Var_Tab[] =
#endif
      {
        // Var name           LED_Nr LED Offset   Typ                Compare value
        { licht1,             19,    (0   << 3) | T_GREATER_THAN,    1   },
        { licht6,             19,    (0   << 3) | T_GREATER_THAN,    2   },
        { licht5,             19,    (0   << 3) | T_GREATER_THAN,    3   },
        { licht8,             19,    (0   << 3) | T_GREATER_THAN,    4   },
        { licht7,             19,    (0   << 3) | T_GREATER_THAN,    5   },
        { licht4,             19,    (0   << 3) | T_GREATER_THAN,    6   },
        { licht3,             19,    (0   << 3) | T_GREATER_THAN,    7   },
        { licht2,             19,    (0   << 3) | T_GREATER_THAN,    8   }
      };




//*******************************************************************
// *** Configuration array which defines the behavior of the LEDs ***
MobaLedLib_Configuration()
  {
  RGB_Heartbeat(0)                                                                                            /* LED auf dem Mainboard                                                                                                                                                                       */
  ConstRGB(1, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 4                                                                                                                                                                                 */
  ConstRGB(2, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 5                                                                                                                                                                                 */
  ConstRGB(3, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 6                                                                                                                                                                                 */
  ConstRGB(4, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 7                                                                                                                                                                                 */
  ConstRGB(5, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 8                                                                                                                                                                                 */
  ConstRGB(6, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 9                                                                                                                                                                                 */
  ConstRGB(7, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 10                                                                                                                                                                                */
  ConstRGB(8, SI_1, 0, 0, 0, 0, 127, 0)                                                                       /* Excel row 11                                                                                                                                                                                */
  RGB_Heartbeat(9)                                                                                            /* Excel row 12                                                                                                                                                                                */
  #define READ_LDR                                                                                            /* Excel row 15                                                                                                                                                                                */
  #define READ_LDR_DEBUG                                                                                      /* Excel row 16                                                                                                                                                                                */
  Schedule(Haus1, Haus1, SI_1, 40, 70)                                                                        /* Excel row 17                                                                                                                                                                                */
  MonoFlop(schrittschaltwerk, Haus1, 16 Sek)                                                                  /* Excel row 18                                                                                                                                                                                */
  // Set_LED_OutpPinLst(6 A4 V)                                                                               /* Excel row 19                                                                                                                                                                                */
  // Activation: Binary                                                                                       /* Sequencer_rose_pub (pc)                                                                                                                                                                     */
  Bin_InCh_to_TmpVar(schrittschaltwerk, 1)                                                                    /*     "                                                                                                                                                                                       */
  PatternT10(19,28,SI_LocalVar,1,0,30,0,PM_NORMAL,100,2 Sec,2 Sec,2 Sec,2 Sec,2 Sec,2 Sec,2 Sec,2 Sec,100,0,1,2,3,4,5,6,7,8,0  ,63,128,0,0,0,0,0,0,0,63) /*     "                                                                                                                                            */
  // LED_to_Var(licht1, 0, >, 1)                                                                              /* Excel row 21                                                                                                                                                                                */
  // LED_to_Var(licht6, 0, >, 2)                                                                              /* Excel row 22                                                                                                                                                                                */
  // LED_to_Var(licht5, 0, >, 3)                                                                              /* Excel row 23                                                                                                                                                                                */
  // LED_to_Var(licht8, 0, >, 4)                                                                              /* Excel row 24                                                                                                                                                                                */
  // LED_to_Var(licht7, 0, >, 5)                                                                              /* Excel row 25                                                                                                                                                                                */
  // LED_to_Var(licht4, 0, >, 6)                                                                              /* Excel row 26                                                                                                                                                                                */
  // LED_to_Var(licht3, 0, >, 7)                                                                              /* Excel row 27                                                                                                                                                                                */
  // LED_to_Var(licht2, 0, >, 8)                                                                              /* Excel row 28                                                                                                                                                                                */
  Const(10, C1, licht1, 0, 200)                                                                               /* Thekenlicht                                                                                                                                                                                 */
  Const(10, C2, licht4, 0, 200)                                                                               /* Billardraum                                                                                                                                                                                 */
  Const(10, C3, licht2, 0, 200)                                                                               /* Strahler hinten                                                                                                                                                                             */
  ConstRGB(11, licht3, 0, 0, 0, 224, 236, 110)                                                                /* Strahler vorne                                                                                                                                                                              */
  MonoFlop(lichtoben, licht5, 3 Sek)                                                                          /* Excel row 33                                                                                                                                                                                */
  ConstRGB(12, lichtoben, 0, 0, 0, 75, 75, 75)                                                                /* Treppe oben                                                                                                                                                                                 */
  MonoFlop(lichtunten, licht6, 3 Sek)                                                                         /* Excel row 35                                                                                                                                                                                */
  ConstRGB(13, lichtunten, 0, 0, 0, 75, 75, 75)                                                               /* Treppe unten                                                                                                                                                                                */
  ConstRGB(14, licht7, 0, 0, 0, 180, 200, 196)                                                                /* Küche                                                                                                                                                                                       */
  ConstRGB(15, licht8, 0, 0, 0, 228, 233, 165)                                                                /* Schankraum                                                                                                                                                                                  */

  EndCfg // End of the configuration
  };
//*******************************************************************

#ifndef COPYLED_OFF
#define COPYLED_OFF 0
#endif

#ifndef COPYLED_OFF_ONCE
#define COPYLED_OFF_ONCE 1
#endif

//---------------------------------------------
void Set_Start_Values(MobaLedLib_C &MobaLedLib)
//---------------------------------------------
{
}


// No macros used which are stored to the EEPROM => Disable the ENABLE_STORE_STATUS flag in case it was set in the excel sheet
#ifdef ENABLE_STORE_STATUS
  #undef ENABLE_STORE_STATUS
#endif

#ifndef CONFIG_ONLY
#endif // CONFIG_ONLY





#endif // __LEDS_AUTOPROG_H__

// This file contains the DCC and LED definitions.
//
// It was automatically generated by the program ProgGenerator Ver. 3.2.1C      by Hardi
// File creation: 05/17/23 18:57:41
// (Attention: The display in the Arduino IDE is not updated if Options/External Editor is disabled)

#ifndef __LEDS_AUTOPROG_H__
#define __LEDS_AUTOPROG_H__

#ifndef CONFIG_ONLY
#ifndef ARDUINO_RASPBERRY_PI_PICO
#define FASTLED_INTERNAL       // Disable version number message in FastLED library (looks like an error)
#include <FastLED.h>           // The FastLED library must be installed in addition if you got the error message "..fatal error: FastLED.h: No such file or directory"
                               // Arduino IDE: Sketch / Include library / Manage libraries                    Deutsche IDE: Sketch / Bibliothek einbinden / Bibliothek verwalten
                               //              Type "FastLED" in the "Filter your search..." field                          "FastLED" in das "Grenzen Sie ihre Suche ein" Feld eingeben
                               //              Select the entry and click "Install"                                         Gefundenen Eintrag auswaehlen und "Install" anklicken
#else
#include <PicoFastLED.h>       // Juergens minimum version or FastLED for Raspberry Pico
#endif
#endif // CONFIG_ONLY

#include <MobaLedLib.h>

#define START_MSG "LEDs_AutoProg Ver 1: 05.17.23 18:57"

#define TWO_BUTTONS_PER_ADDRESS 1      // Two buttons (Red/Green) are used (DCC/CAN)
#ifdef NUM_LEDS
  #warning "'NUM_LEDS' definition in the main program is replaced by the included 'LEDs_AutoProg.h' with 24"
  #undef NUM_LEDS
#endif

#define NUM_LEDS 24                    // Number of LEDs (Maximal 256 RGB LEDs could be used)

#define LEDS_PER_CHANNEL ",24"

#define RECEIVE_LED_COLOR_PER_RS232

#define GEN_BUTTON_RELEASE_COM GEN_OFF
#define USE_EXT_ADDR
#define USE_RS232_OR_SPI_AS_INPUT      // Use the RS232 or SPI Input to read DCC/SX commands from the second Arduino and from the PC (The SPI is only used if enabled with USE_SPI_COM)
#define ADDR_OFFSET 0

#define ADDR_MSK  0x3FFF  // 14 Bits are used for the Address

#define S_ONOFF   (uint16_t)0
#define B_RED     (uint16_t)(1<<14)
#define B_GREEN   (uint16_t)(2<<14)
#define O_RET_MSG (uint16_t)(3<<14)    // Return messages (Rueckmelder)
#define B_TAST    B_RED


typedef struct
    {
    uint16_t AddrAndTyp; // Addr range: 0..16383. The upper two bytes are used for the type
    uint8_t  InCnt;
    } __attribute__ ((packed)) Ext_Addr_T;

// Definition of external adresses
#ifdef CONFIG_ONLY
const Ext_Addr_T Ext_Addr[] __attribute__ ((section (".MLLAddressConfig"))) =
#else
const PROGMEM Ext_Addr_T Ext_Addr[] =
#endif
         { // Addr & Typ    InCnt
           { 100  + S_ONOFF,   1 },      // Excel row 6
           { 101  + S_ONOFF,   1 },      // Excel row 8
           { 102  + S_ONOFF,   1 },      // Excel row 10
           { 103  + S_ONOFF,   1 },      // Excel row 12
           { 104  + S_ONOFF,   1 },      // Excel row 14
           { 105  + S_ONOFF,   1 },      // Excel row 16
           { 106  + S_ONOFF,   1 },      // Excel row 18
           { 107  + S_ONOFF,   1 },      // Excel row 20
           { 108  + S_ONOFF,   1 },      // Excel row 22
           { 109  + S_ONOFF,   1 },      // Excel row 25
           { 110  + S_ONOFF,   1 },      // Excel row 27
           { 111  + S_ONOFF,   1 },      // Excel row 29
           { 112  + S_ONOFF,   1 },      // Excel row 31
           { 113  + S_ONOFF,   1 },      // Excel row 33
           { 114  + S_ONOFF,   1 },      // Excel row 35
           { 115  + S_ONOFF,   1 },      // Excel row 37
           { 116  + S_ONOFF,   1 },      // Excel row 39
           { 117  + S_ONOFF,   1 },      // Excel row 41
           { 118  + S_ONOFF,   1 },      // Excel row 43
           { 119  + S_ONOFF,   1 },      // Excel row 45
           { 120  + S_ONOFF,   1 },      // Excel row 47
           { 121  + S_ONOFF,   1 },      // Excel row 49
           { 122  + S_ONOFF,   1 },      // Excel row 51
           { 123  + S_ONOFF,   1 },      // Excel row 53
         };


// Input channel defines for local inputs and expert users
#define INCH_DCC_100_ONOFF      0      // Excel row 6
#define INCH_DCC_101_ONOFF      1      // Excel row 8
#define INCH_DCC_102_ONOFF      2      // Excel row 10
#define INCH_DCC_103_ONOFF      3      // Excel row 12
#define INCH_DCC_104_ONOFF      4      // Excel row 14
#define INCH_DCC_105_ONOFF      5      // Excel row 16
#define INCH_DCC_106_ONOFF      6      // Excel row 18
#define INCH_DCC_107_ONOFF      7      // Excel row 20
#define INCH_DCC_108_ONOFF      8      // Excel row 22
#define INCH_DCC_109_ONOFF      9      // Excel row 25
#define INCH_DCC_110_ONOFF      10     // Excel row 27
#define INCH_DCC_111_ONOFF      11     // Excel row 29
#define INCH_DCC_112_ONOFF      12     // Excel row 31
#define INCH_DCC_113_ONOFF      13     // Excel row 33
#define INCH_DCC_114_ONOFF      14     // Excel row 35
#define INCH_DCC_115_ONOFF      15     // Excel row 37
#define INCH_DCC_116_ONOFF      16     // Excel row 39
#define INCH_DCC_117_ONOFF      17     // Excel row 41
#define INCH_DCC_118_ONOFF      18     // Excel row 43
#define INCH_DCC_119_ONOFF      19     // Excel row 45
#define INCH_DCC_120_ONOFF      20     // Excel row 47
#define INCH_DCC_121_ONOFF      21     // Excel row 49
#define INCH_DCC_122_ONOFF      22     // Excel row 51
#define INCH_DCC_123_ONOFF      23     // Excel row 53


//*** Output Channels ***
#define START_VARIABLES   24                                       // Define the start number for the variables.
#define V_LED1                  24                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:1
#define V_LED2                  25                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:2
#define V_LED3                  26                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:3
#define V_LED4                  27                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:4
#define V_LED5                  28                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:5
#define V_LED6                  29                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:6
#define V_LED7                  30                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:7
#define V_LED8                  31                                       // Z21-RM-Rückmelder: Adresse:1 Eingang:8
#define V_LED9                  32                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:1
#define V_LED10                 33                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:2
#define V_LED11                 34                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:3
#define V_LED12                 35                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:4
#define V_LED13                 36                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:5
#define V_LED14                 37                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:6
#define V_LED15                 38                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:7
#define V_LED16                 39                                       // Z21-RM-Rückmelder: Adresse:2 Eingang:8
#define V_LED17                 40                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:1
#define V_LED18                 41                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:2
#define V_LED19                 42                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:3
#define V_LED20                 43                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:4
#define V_LED21                 44                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:5
#define V_LED22                 45                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:6
#define V_LED23                 46                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:7
#define V_LED24                 47                                       // Z21-RM-Rückmelder: Adresse:3 Eingang:8


#define START_SEND_INPUTS 24                                       // Start address of all switches/variables
#define TOTAL_SEND_INPUTS 24                                       // Number of used switches/variables
#define TOTAL_SWITCHES_A  0                                        // Number of used inputs for analog keyboard
#define TOTAL_SWITCHES_B  0                                        // Number of used inputs for keyboard 1
#define TOTAL_SWITCHES_C  0                                        // Number of used inputs for keyboard 2
#define TOTAL_SWITCHES_D  0                                        // Number of used inputs for main board switches
#define TOTAL_VARIABLES   24                                       // Number of used variables
/*********************/
#define SETUP_FASTLED()                                                      \
/*********************/                                                      \
  CLEDController& controller0 = FastLED.addLeds<NEOPIXEL,  6>(leds+  0, 24); \
                                                                             \
  controller0.clearLeds(256);                                                \
  FastLED.setDither(DISABLE_DITHER);       // avoid sending slightly modified brightness values
/*End*/

// ----- LED to Var -----
  #define USE_LED_TO_VAR

  #define T_EQUAL_THEN     0
  #define T_NOT_EQUAL_THEN 1
  #define T_LESS_THEN      2
  #define T_GREATER_THAN   3
  #define T_BIN_MASK       4
  #define T_NOT_BIN_MASK   5

  typedef struct
      {
      uint8_t  Var_Nr;
      uint8_t  LED_Nr;
      uint8_t  Offset_and_Typ; // ---oottt    Offset: 0..2
      uint8_t  Val;
      } __attribute__ ((packed)) LED2Var_Tab_T;

#ifdef CONFIG_ONLY
  const LED2Var_Tab_T LED2Var_Tab[] __attribute__ ((section (".MLLL2VConfig"))) =
#else
  const PROGMEM LED2Var_Tab_T LED2Var_Tab[] =
#endif
      {
        // Var name           LED_Nr LED Offset   Typ                Compare value
        { V_LED1,             0,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED2,             1,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED3,             2,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED4,             3,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED5,             4,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED6,             5,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED7,             6,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED8,             7,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED9,             8,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED10,            9,     (0   << 3) | T_GREATER_THAN,    0   },        { V_LED11,            10,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED12,            11,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED13,            12,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED14,            13,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED15,            14,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED16,            15,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED17,            16,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED18,            17,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED19,            18,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED20,            19,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED21,            20,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED22,            21,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED23,            22,    (0   << 3) | T_GREATER_THAN,    0   },        { V_LED24,            23,    (0   << 3) | T_GREATER_THAN,    0   },
      };




//*******************************************************************
// *** Configuration array which defines the behavior of the LEDs ***
MobaLedLib_Configuration()
  {
  #define SEND_INPUTS                                                                                         /* Excel row 5                                                                                                                                                                                 */
  ConstRGB(0, 0, 0, 0, 0, 127, 127, 127)                                                                      /* Excel row 6                                                                                                                                                                                 */
  // LED_to_Var(V_LED1, 0, >, 0)                                                                              /* Excel row 7                                                                                                                                                                                 */
  Const(1, C_ALL, 1, 0, 127)                                                                                  /* Excel row 8                                                                                                                                                                                 */
  // LED_to_Var(V_LED2, 0, >, 0)                                                                              /* Excel row 9                                                                                                                                                                                 */
  Const(2, C_ALL, 2, 0, 127)                                                                                  /* Excel row 10                                                                                                                                                                                */
  // LED_to_Var(V_LED3, 0, >, 0)                                                                              /* Excel row 11                                                                                                                                                                                */
  Const(3, C_ALL, 3, 0, 127)                                                                                  /* Excel row 12                                                                                                                                                                                */
  // LED_to_Var(V_LED4, 0, >, 0)                                                                              /* Excel row 13                                                                                                                                                                                */
  Const(4, C_ALL, 4, 0, 127)                                                                                  /* Excel row 14                                                                                                                                                                                */
  // LED_to_Var(V_LED5, 0, >, 0)                                                                              /* Excel row 15                                                                                                                                                                                */
  Const(5, C_ALL, 5, 0, 127)                                                                                  /* Excel row 16                                                                                                                                                                                */
  // LED_to_Var(V_LED6, 0, >, 0)                                                                              /* Excel row 17                                                                                                                                                                                */
  Const(6, C_ALL, 6, 0, 127)                                                                                  /* Excel row 18                                                                                                                                                                                */
  // LED_to_Var(V_LED7, 0, >, 0)                                                                              /* Excel row 19                                                                                                                                                                                */
  Const(7, C_ALL, 7, 0, 127)                                                                                  /* Excel row 20                                                                                                                                                                                */
  // LED_to_Var(V_LED8, 0, >, 0)                                                                              /* Excel row 21                                                                                                                                                                                */
  Const(8, C_ALL, 8, 0, 127)                                                                                  /* Excel row 22                                                                                                                                                                                */
  // LED_to_Var(V_LED9, 0, >, 0)                                                                              /* Excel row 23                                                                                                                                                                                */
  #define SEND_INPUTS                                                                                         /* Excel row 24                                                                                                                                                                                */
  ConstRGB(9, 9, 0, 0, 0, 127, 127, 127)                                                                      /* Excel row 25                                                                                                                                                                                */
  // LED_to_Var(V_LED10, 0, >, 0)                                                                             /* Excel row 26                                                                                                                                                                                */
  Const(10, C_ALL, 10, 0, 127)                                                                                /* Excel row 27                                                                                                                                                                                */
  // LED_to_Var(V_LED11, 0, >, 0)                                                                             /* Excel row 28                                                                                                                                                                                */
  Const(11, C_ALL, 11, 0, 127)                                                                                /* Excel row 29                                                                                                                                                                                */
  // LED_to_Var(V_LED12, 0, >, 0)                                                                             /* Excel row 30                                                                                                                                                                                */
  Const(12, C_ALL, 12, 0, 127)                                                                                /* Excel row 31                                                                                                                                                                                */
  // LED_to_Var(V_LED13, 0, >, 0)                                                                             /* Excel row 32                                                                                                                                                                                */
  Const(13, C_ALL, 13, 0, 127)                                                                                /* Excel row 33                                                                                                                                                                                */
  // LED_to_Var(V_LED14, 0, >, 0)                                                                             /* Excel row 34                                                                                                                                                                                */
  Const(14, C_ALL, 14, 0, 127)                                                                                /* Excel row 35                                                                                                                                                                                */
  // LED_to_Var(V_LED15, 0, >, 0)                                                                             /* Excel row 36                                                                                                                                                                                */
  Const(15, C_ALL, 15, 0, 127)                                                                                /* Excel row 37                                                                                                                                                                                */
  // LED_to_Var(V_LED16, 0, >, 0)                                                                             /* Excel row 38                                                                                                                                                                                */
  Const(16, C_ALL, 16, 0, 127)                                                                                /* Excel row 39                                                                                                                                                                                */
  // LED_to_Var(V_LED17, 0, >, 0)                                                                             /* Excel row 40                                                                                                                                                                                */
  Const(17, C_ALL, 17, 0, 127)                                                                                /* Excel row 41                                                                                                                                                                                */
  // LED_to_Var(V_LED18, 0, >, 0)                                                                             /* Excel row 42                                                                                                                                                                                */
  Const(18, C_ALL, 18, 0, 127)                                                                                /* Excel row 43                                                                                                                                                                                */
  // LED_to_Var(V_LED19, 0, >, 0)                                                                             /* Excel row 44                                                                                                                                                                                */
  Const(19, C_ALL, 19, 0, 127)                                                                                /* Excel row 45                                                                                                                                                                                */
  // LED_to_Var(V_LED20, 0, >, 0)                                                                             /* Excel row 46                                                                                                                                                                                */
  Const(20, C_ALL, 20, 0, 127)                                                                                /* Excel row 47                                                                                                                                                                                */
  // LED_to_Var(V_LED21, 0, >, 0)                                                                             /* Excel row 48                                                                                                                                                                                */
  Const(21, C_ALL, 21, 0, 127)                                                                                /* Excel row 49                                                                                                                                                                                */
  // LED_to_Var(V_LED22, 0, >, 0)                                                                             /* Excel row 50                                                                                                                                                                                */
  Const(22, C_ALL, 22, 0, 127)                                                                                /* Excel row 51                                                                                                                                                                                */
  // LED_to_Var(V_LED23, 0, >, 0)                                                                             /* Excel row 52                                                                                                                                                                                */
  Const(23, C_ALL, 23, 0, 127)                                                                                /* Excel row 53                                                                                                                                                                                */
  // LED_to_Var(V_LED24, 0, >, 0)                                                                             /* Excel row 54                                                                                                                                                                                */

  EndCfg // End of the configuration
  };
//*******************************************************************

//---------------------------------------------
void Set_Start_Values(MobaLedLib_C &MobaLedLib)
//---------------------------------------------
{
}


// if function returns TRUE the calling loop stops
typedef bool(*HandleValue_t) (uint8_t CallbackType, uint8_t ValueId, uint8_t* Value, uint16_t EEPromAddr, uint8_t TargetValueId, uint8_t Options);


#define InCnt_MSK  0x003F  // 6 bits are used for the InCnt, 2 bits for the type ttcc cccc => Max InCnt=63
#define IS_COUNTER (uint8_t)0x80
#define IS_PULSE   (uint8_t)0x40
#define IS_TOGGLE  (uint8_t)0x00
#define COUNTER_ID

typedef struct
    {
    uint8_t TypAndInCnt; // Type bits 7 & 6, InCnt 0..5
    uint8_t Channel;
    } __attribute__ ((packed)) Store_Channel_T;

// Definition of channels and counters that need to store state in EEProm
const PROGMEM Store_Channel_T Store_Values[] =
         { // Mode + InCnt , Channel
           { IS_TOGGLE + 1 , INCH_DCC_100_ONOFF  },      // Excel row 6
           { IS_TOGGLE + 1 , INCH_DCC_101_ONOFF  },      // Excel row 8
           { IS_TOGGLE + 1 , INCH_DCC_102_ONOFF  },      // Excel row 10
           { IS_TOGGLE + 1 , INCH_DCC_103_ONOFF  },      // Excel row 12
           { IS_TOGGLE + 1 , INCH_DCC_104_ONOFF  },      // Excel row 14
           { IS_TOGGLE + 1 , INCH_DCC_105_ONOFF  },      // Excel row 16
           { IS_TOGGLE + 1 , INCH_DCC_106_ONOFF  },      // Excel row 18
           { IS_TOGGLE + 1 , INCH_DCC_107_ONOFF  },      // Excel row 20
           { IS_TOGGLE + 1 , INCH_DCC_108_ONOFF  },      // Excel row 22
           { IS_TOGGLE + 1 , INCH_DCC_109_ONOFF  },      // Excel row 25
           { IS_TOGGLE + 1 , INCH_DCC_110_ONOFF  },      // Excel row 27
           { IS_TOGGLE + 1 , INCH_DCC_111_ONOFF  },      // Excel row 29
           { IS_TOGGLE + 1 , INCH_DCC_112_ONOFF  },      // Excel row 31
           { IS_TOGGLE + 1 , INCH_DCC_113_ONOFF  },      // Excel row 33
           { IS_TOGGLE + 1 , INCH_DCC_114_ONOFF  },      // Excel row 35
           { IS_TOGGLE + 1 , INCH_DCC_115_ONOFF  },      // Excel row 37
           { IS_TOGGLE + 1 , INCH_DCC_116_ONOFF  },      // Excel row 39
           { IS_TOGGLE + 1 , INCH_DCC_117_ONOFF  },      // Excel row 41
           { IS_TOGGLE + 1 , INCH_DCC_118_ONOFF  },      // Excel row 43
           { IS_TOGGLE + 1 , INCH_DCC_119_ONOFF  },      // Excel row 45
           { IS_TOGGLE + 1 , INCH_DCC_120_ONOFF  },      // Excel row 47
           { IS_TOGGLE + 1 , INCH_DCC_121_ONOFF  },      // Excel row 49
           { IS_TOGGLE + 1 , INCH_DCC_122_ONOFF  },      // Excel row 51
           { IS_TOGGLE + 1 , INCH_DCC_123_ONOFF  },      // Excel row 53
         };

#ifndef CONFIG_ONLY
#endif // CONFIG_ONLY





#endif // __LEDS_AUTOPROG_H__
